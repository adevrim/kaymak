(function(e){var t=[];var n=0;var r=[];var i=[];var s=[];var o=[];var u=[];var a=[];var f=[];var l=[];var c=[];var h=[];var p=[];var d=0;e.fn.kThumbnail=function(t){t=e.extend({icon:"number",content:"",kaymak_id:""},t);$kThumbnail=e(this);$kaymakId=t.kaymak_id;var n=0;e($kaymakId).find("li").each(function(){if(t.icon=="number"){$icon=n+1}if(t.icon=="point"){$icon="â€¢"}if(t.icon=="html"){$icon=t.content}if(t.icon=="thumbnail"){$icon='<img src="'+e(this).attr("data-thumbnail")+'">'}$kThumbnail.append('<div class="kaymak-thumb-block" data-block-number="'+n+'">'+$icon+"</div>");n++});$kThumbnail.find(".kaymak-thumb-block").hammer().bind("release",function(t){e($kaymakId).kGo(e(this).attr("data-block-number"),true)})};e.fn.kNavigate=function(n){var r=t[e(this).data("k_id")];var i=r.kid;$ViewportCount=e(this).parent().width()/e(this).children("li").eq(0).width();$BlockCount=e(this).children("li").length;$DragLimit=$BlockCount-$ViewportCount-1;$LastLimit=$DragLimit+1;if(n=="prev"){if(r.current_block==0){r.current_block=$LastLimit}else{r.current_block--}}if(n=="pageprev"){$prevPageBlock=r.current_block-$ViewportCount;if(r.current_block==0){r.current_block=$LastLimit}else if($prevPageBlock<0){r.current_block=0}else{r.current_block=$prevPageBlock}}if(n=="next"){if(r.current_block>$DragLimit){r.current_block=0}else{r.current_block++}}if(n=="pagenext"){$nextPageBlock=r.current_block+$ViewportCount;if(r.current_block==$LastLimit){r.current_block=0}else if($nextPageBlock>$LastLimit){r.current_block=$LastLimit}else{r.current_block=$nextPageBlock}}if(u[i]!=0){clearInterval(p[i])}t[e(this).data("k_id")]=r;e(this).kGo(r.current_block,true);if(u[i]!=0){setTimeout(function(){p[i]=setInterval(function(){if(o[i]==true){if(f[i]=="page"){h[i].kNavigate("pagenext")}if(f[i]=="block"){h[i].kNavigate("next")}}},u[i])})}};e.fn.kOffset=function(n,r){var i=t[e(this).data("k_id")];$DragLimitedSelfWidth=e(this).width()-50;$DragLimitedChildWidth=e(this).children("li").eq(0).width()-50;if(r){if(i.height_auto=="enable"){$marginTB=parseInt(e(this).children("li").eq(i.current_block).find(".height-auto").find("img").css("marginTop"),10)+parseInt(e(this).children("li").eq(i.current_block).find(".height-auto").find("img").css("marginBottom"),10);$bh=e(this).children("li").eq(i.current_block).find(".height-auto").height();if(i.content=="image"){e(this).parent(".kaymak-container").stop().animate({height:$bh+$marginTB},400)}else{e(this).parent(".kaymak-container").stop().animate({height:$bh},400)}}e(this).stop().animate({left:n},400)}else{if(0<n&&n>$DragLimitedChildWidth){changed_offset=$DragLimitedChildWidth}else if(0>n&&n<-$DragLimitedSelfWidth){changed_offset=-$DragLimitedSelfWidth}else{changed_offset=n}e(this).css("left",changed_offset+"px")}};e.fn.kGo=function(n,r){var i=t[e(this).data("k_id")];i.current_block=n;if(i.current_block<0){i.current_block=0}if(i.current_block>=i.block_count){i.current_block=i.block_count-1}newoffset=-(i.current_block*i.width);i.offset=newoffset;if(i.current_block_element){e(i.current_block_element).html(i.current_block+1)}e(this).kOffset(i.offset,r)};e.fn.kaymak=function(v){$childWidth=e(this).children("li").eq(0).width();$selfWidth=$childWidth*e(this).children("li").length;e(this).css({width:$selfWidth});v=e.extend({action:"none",auto:"block",drag:"block",click:"none",duration:0,content:"empty",responsive:"no",height_auto:"no",caption:"enable",offset:0,total_block:e(this).children("li").length,turn_threshold:.1,current_block:0,width:$childWidth},v);if(v.content=="image"){e(this).children("li").each(function(){if(e(this).attr("data-caption")=="enable"){$blockCaption='<div class="kaymak-image-caption"><center><span>'+e(this).html()+"</span></center></div>"}else{$blockCaption=" "}$blockImage=e(this).attr("data-image");$blockWidth=e(this).attr("data-width");$blockHeight=e(this).attr("data-height");e(this).html('<div class="responsive height-auto kaymak-image" onmousedown="event.preventDefault ? event.preventDefault() : event.returnValue = false"><center><img src="'+$blockImage+'" width="'+$blockWidth+'" height="'+$blockHeight+'">'+$blockCaption+"</center></div>")})}this.each(function(){var m=d;d++;v.kid=m;a[m]=v.action;u[m]=v.duration;f[m]=v.auto;l[m]=v.drag;c[m]=v.click;h[m]=e(this);r[m]=false;i[m]=false;o[m]=true;if(v.caption=="auto"){e(".kaymak-image-caption").hide();h[m].bind("mouseover",function(){e(this).find(".kaymak-image-caption").slideDown()});h[m].bind("mouseleave",function(){e(this).find(".kaymak-image-caption").slideUp()})}if(v.responsive=="enable"){function g(){$pw=h[m].parents(".kaymak-container").width();v.width=$pw;if(v.content=="image"){h[m].find(".responsive").each(function(){$marginLR=parseInt(e(this).find("img").css("marginLeft"),10)+parseInt(e(this).find("img").css("marginRight"),10);$marginTB=parseInt(e(this).find("img").css("marginTop"),10)+parseInt(e(this).find("img").css("marginBottom"),10);if(e(this).parent().attr("data-width")>$pw){e(this).find("img").width($pw-$marginLR);var t=e(this).parent().attr("data-height")*($pw/e(this).parent().attr("data-width"));e(this).find("img").height(t-$marginTB)}else{e(this).find("img").width(e(this).parent().attr("data-width")-$marginLR);e(this).find("img").height(e(this).parent().attr("data-height")-$marginTB)}})}h[m].css({width:$pw*v.total_block});h[m].children("li").css({width:$pw})}g();e(window).bind("resize",function(){g();h[m].kGo(0,true)})}if(v.height_auto=="fixed"){function y(){var t=0;h[m].find("li").each(function(){$bh=e(this).height();if($bh>t){t=$bh}}).each(function(){e(this).stop().css({marginTop:(t-e(this).height())/2})});h[m].parents(".kaymak-container").css({height:t})}y();e(window).bind("resize",function(){y()})}if(v.height_auto=="enable"){h[m].find("li").each(function(){$bh=e(this).height();$marginTB=parseInt(e(this).find("img").css("marginTop"),10)+parseInt(e(this).find("img").css("marginBottom"),10);if(v.content=="image"){e(this).css({height:$bh+$marginTB})}else{e(this).css({height:$bh})}})}if(c[m]=="full"){h[m].css("cursor","pointer")}if(a[m]=="auto"){p[m]=setInterval(function(){if(o[m]==true){if(f[m]=="page"){h[m].kNavigate("pagenext")}if(f[m]=="block"){h[m].kNavigate("next")}}},u[m]);h[m].bind("mouseover",function(e){r[m]=true;o[m]=false;clearInterval(p[m])}).bind("mouseleave",function(e){r[m]=false;if(i[m]==true){o[m]=false}else{o[m]=true;setTimeout(function(){p[m]=setInterval(function(){if(o[m]==true){if(f[m]=="page"){h[m].kNavigate("pagenext")}if(f[m]=="block"){h[m].kNavigate("next")}}},u[m])})}})}h[m].hammer({drag_vertical:false,swipe_time:20});v.block_count=e(this).children("li").length;if(v.total_blocks_element){e(v.total_blocks_element).html(v.block_count)}if(v.current_block_element){e(v.current_block_element).html(v.current_block+1)}h[m].bind("dragstart",function(e){if(e.gesture.direction=="left"||e.gesture.direction=="right"){n=0}i[m]=true;if(a[m]=="auto"){o[m]=false;clearInterval(p[m])}});h[m].children("li").bind("release",function(t){if(s[m]<event.timeStamp-500||s[m]==undefined){if(c[m]=="full"){$target=e(this).attr("data-target");if($target==undefined){$target="_self"}$url=e(this).attr("data-link");window.open($url,$target)}}});h[m].bind("drag",function(r){if(r.gesture.direction=="left"||r.gesture.direction=="right"){n=r.gesture.deltaX;var i=t[e(this).data("k_id")];e(this).kOffset(i.offset+n)}});h[m].bind("dragend",function(c){i[m]=false;s[m]=event.timeStamp;if(a[m]=="auto"){if(r[m]==false){o[m]=true;setTimeout(function(){p[m]=setInterval(function(){if(o[m]==true){if(f[m]=="page"){h[m].kNavigate("pagenext")}if(f[m]=="block"){h[m].kNavigate("next")}}},u[m])})}else{o[m]=false}}if(c.gesture.direction=="left"||c.gesture.direction=="right"){var d=t[e(this).data("k_id")];if(c.gesture.direction=="left"){if(d.current_block==d.block_count-1){turn_threshold_edited=.6}else{turn_threshold_edited=d.turn_threshold}}if(c.gesture.direction=="right"){if(d.current_block==0){turn_threshold_edited=.6}else{turn_threshold_edited=d.turn_threshold}}$ViewportCount=e(this).parent().width()/e(this).children("li").eq(0).width();$BlockCount=e(this).children("li").length;$DragLimit=$BlockCount-$ViewportCount-1;$LastLimit=$DragLimit+1;if(Math.abs(n/d.width)>turn_threshold_edited){if(c.gesture.direction=="left"){if(l[m]=="block"){if(d.current_block>$DragLimit){d.current_block=0}else{d.current_block++}}if(l[m]=="page"){$nextPageBlock=d.current_block+$ViewportCount;if(d.current_block==$LastLimit){d.current_block=0}else if($nextPageBlock>$LastLimit){d.current_block=$LastLimit}else{d.current_block=$nextPageBlock}}}if(c.gesture.direction=="right"){if(l[m]=="block"){if(d.current_block==0){d.current_block=$LastLimit}else{d.current_block--}}if(l[m]=="page"){$prevPageBlock=d.current_block-$ViewportCount;if(d.current_block==0){d.current_block=$LastLimit}else if($prevPageBlock<0){d.current_block=0}else{d.current_block=$prevPageBlock}}}}t[e(this).data("k_id")]=d;e(this).kGo(d.current_block,true)}})});e(this).data("k_id",t.length);t[e(this).data("k_id")]=v}})(jQuery)